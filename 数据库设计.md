# 数据库设计

## 1、用户表 tb_user

| 字段      | 类型        | 约束               | 备注                           |
| --------- | ----------- | ------------------ | ------------------------------ |
| id        | int(11)     | 主键、自增         | 用户ID                         |
| username  | varchar(50) | 非空               | 用户名                         |
| password  | varchar(50) | 非空               | 密码                           |
| phone     | varchar(50) |                    | 手机号                         |
| email     | varchar(50) |                    | 邮箱                           |
| real_name | varchar(50) |                    | 真实姓名                       |
| status    | int(11)     | 默认值为0          | 状态，0为正常账户，1为锁定账户 |
| role_id   | int(11)     |                    | 角色ID                         |
| token     | varchar(50) |                    | 授权码                         |
| create_at | datetime    | 默认为首次插入时间 | 注册时间                       |


## 2、角色表 tb_role

| 字段   | 类型        | 约束       | 备注                       |
| ------ | ----------- | ---------- | -------------------------- |
| id     | int(11)     | 主键、自增 | 用户ID                     |
| name   | varchar(50) | 非空       | 角色名称                   |
| status | int(11)     | 默认值为1  | 角色状态，0为禁用，1为启用 |



#### 角色表（tb_role）

| 字段 | 类型        | 备注     |
| ---- | ----------- | -------- |
| id   | int(11)     | 角色ID   |
| name | varchar(50) | 角色名称 |
| ...  | ...         | 其他字段 |

#### 权限表（tb_permission）（可选）

| 字段 | 类型        | 备注     |
| ---- | ----------- | -------- |
| id   | int(11)     | 权限ID   |
| name | varchar(50) | 权限名称 |
| ...  | ...         | 其他字段 |

#### 用户角色中间表（tb_user_role）

| 字段    | 类型    | 备注   |
| ------- | ------- | ------ |
| user_id | int(11) | 用户ID |
| role_id | int(11) | 角色ID |




## 3、商品表 tb_item



| 字段   | 类型          | 约束       | 备注     |
| ------ | ------------- | ---------- | -------- |
| id     | int(11)       | 主键、自增 | 商品ID   |
| name   | varchar(50)   | 非空       | 商品名称 |
| price  | decimal(10,2) | 非空       | 商品价格 |
| number | int(11)       | 非空       | 商品数量 |




## 4、订单表 tb_order

用户创建订单

订单包含商品

| 字段       | 类型    | 约束       | 备注           |
| ---------- | ------- | ---------- | -------------- |
| id         | int(11) | 主键、自增 | 用户ID         |
| type       |         |            | 订单类型       |
| item_id    |         |            | 商品编号       |
| item_count |         |            | 购买商品的数量 |
| user_id    |         |            | 用户编号       |
| create_at  |         |            | 订单创建时间   |
| commit_at  |         |            | 订单提交时间   |
| status     |         |            | 订单状态       |

## 5、商品购买表 tb_order_item

一个订单可以购买多个商品

| 字段       | 类型    | 约束       | 备注         |
| ---------- | ------- | ---------- | ------------ |
| id         | int(11) | 主键、自增 | 商品购买ID   |
| item_id    |         |            | 商品编号     |
| item_count |         |            | 商品购买数量 |
| order_id   |         |            | 订单ID       |




## 5、购物车 tb_cart

用户订购商品，则产生cart

用户清空购物车，则清空cart


| 字段     | 类型    | 约束       | 备注     |
| -------- | ------- | ---------- | -------- |
| cart_id  | int(11) | 主键、自增 | 购物车ID |
| item_id  |         |            | 商品ID   |
| item_num |         |            | 商品数量 |
| user_id  |         |            | 用户ID   |
|          |         |            |          |
|          |         |            |          |
|          |         |            |          |
|          |         |            |          |
|          |         |            |          |
|          |         |            |          |
|          |         |            |          |
|          |         |            |          |
|          |         |            |          |
|          |         |            |          |



## 6、顾客表 tb_customer

| 字段       | 类型    | 约束       | 备注       |
| ---------- | ------- | ---------- | ---------- |
| cid        | int(11) | 主键、自增 | 顾客ID     |
| cname      |         |            | 顾客姓名   |
| ctype      |         |            | 顾客类型   |
| sex        |         |            | 顾客性别   |
| origin     |         |            | 顾客来源   |
| phone      |         |            | 顾客手机号 |
| wechat     |         |            | 顾客微信   |
|            |         |            |            |
| email      |         |            | 顾客邮箱   |
| province   |         |            | 省         |
| city       |         |            | 市         |
| prefecture |         |            | 县         |
| address    |         |            | 详细地址   |
| uid        |         |            | 用户id     |
| create_at  |         |            | 创建日期   |
| status     |         |            | 顾客状态   |
|            |         |            |            |



